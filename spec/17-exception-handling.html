<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Exception Handling - PHP Language Specification</title>


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../src/css/style.css">

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../welcome.html">Welcome</a></li><li class="chapter-item expanded "><a href="../spec/01-introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="../spec/02-conformance.html"><strong aria-hidden="true">2.</strong> Conformance</a></li><li class="chapter-item expanded "><a href="../spec/03-terms-and-definitions.html"><strong aria-hidden="true">3.</strong> Terms and Definitions</a></li><li class="chapter-item expanded "><a href="../spec/04-basic-concepts.html"><strong aria-hidden="true">4.</strong> Basic Concepts</a></li><li class="chapter-item expanded "><a href="../spec/05-types.html"><strong aria-hidden="true">5.</strong> Types</a></li><li class="chapter-item expanded "><a href="../spec/06-constants.html"><strong aria-hidden="true">6.</strong> Constants</a></li><li class="chapter-item expanded "><a href="../spec/07-variables.html"><strong aria-hidden="true">7.</strong> Variables</a></li><li class="chapter-item expanded "><a href="../spec/08-conversions.html"><strong aria-hidden="true">8.</strong> Conversions</a></li><li class="chapter-item expanded "><a href="../spec/09-lexical-structure.html"><strong aria-hidden="true">9.</strong> Lexical Structure</a></li><li class="chapter-item expanded "><a href="../spec/10-expressions.html"><strong aria-hidden="true">10.</strong> Expressions</a></li><li class="chapter-item expanded "><a href="../spec/11-statements.html"><strong aria-hidden="true">11.</strong> Statements</a></li><li class="chapter-item expanded "><a href="../spec/12-arrays.html"><strong aria-hidden="true">12.</strong> Arrays</a></li><li class="chapter-item expanded "><a href="../spec/13-functions.html"><strong aria-hidden="true">13.</strong> Functions</a></li><li class="chapter-item expanded "><a href="../spec/14-classes.html"><strong aria-hidden="true">14.</strong> Classes</a></li><li class="chapter-item expanded "><a href="../spec/15-interfaces.html"><strong aria-hidden="true">15.</strong> Interfaces</a></li><li class="chapter-item expanded "><a href="../spec/16-traits.html"><strong aria-hidden="true">16.</strong> Traits</a></li><li class="chapter-item expanded "><a href="../spec/17-exception-handling.html" class="active"><strong aria-hidden="true">17.</strong> Exception Handling</a></li><li class="chapter-item expanded "><a href="../spec/18-namespaces.html"><strong aria-hidden="true">18.</strong> Namespaces</a></li><li class="chapter-item expanded "><a href="../spec/19-grammar.html"><strong aria-hidden="true">19.</strong> Grammar</a></li><li class="chapter-item expanded "><a href="../spec/20-bibliography.html"><strong aria-hidden="true">20.</strong> Bibliography</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">PHP Language Specification</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/php/php-langspec" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="exception-handling"><a class="header" href="#exception-handling">Exception Handling</a></h1>
<h2 id="general"><a class="header" href="#general">General</a></h2>
<p>An <em>exception</em> is some unusual condition in that it is outside the
ordinary expected behavior. Examples include dealing with situations in
which a critical resource is needed, but is unavailable, and detecting
an out-of-range value for some computation. As such, exceptions require
special handling. This chapter describes how exceptions can be created
and handled.</p>
<p>Whenever some exceptional condition is detected at runtime, an exception
is <em>thrown</em>. A designated exception handler can <em>catch</em> the thrown
exception and service it. Among other things, the handler might recover
from the situation completely (allowing the script to continue
execution), it might perform some recovery and then throw an exception
to get further help, or it might perform some cleanup action and
terminate the script. Exceptions may be thrown on behalf of the Engine
or by explicit code source code in the script.</p>
<p>Exception handling involves the use of the following keywords:</p>
<ul>
<li><a href="11-statements.html#the-try-statement"><code>try</code></a>, which allows a <em>try-block</em> of code containing one or
more possible exception generations, to be tried.</li>
<li><a href="11-statements.html#the-try-statement"><code>catch</code></a>, which defines a handler for a specific type of
exception thrown from the corresponding try-block or from some
function it calls.</li>
<li><a href="11-statements.html#the-try-statement"><code>finally</code></a>, which allows the <em>finally-block</em> of a try-block to
be executed (to perform some cleanup, for example), whether or not
an exception occurred within that try-block.</li>
<li><a href="11-statements.html#the-throw-statement"><code>throw</code></a>, which generates an exception of a given type, from
a place called a <em>throw point</em>.</li>
</ul>
<p>When an exception is thrown, an <em>exception object</em> of type <a href="#class-exception"><code>Exception</code></a>,
or of a subclass of that type, is created and made available to
the first catch-handler that can catch it. Among other things, the
exception object contains an <em>exception message</em> and an <em>exception
code</em>, both of which can be used by a handler to determine how to handle
the situation.</p>
<p>PHP errors also can be translated to exceptions via the class
<a href="http://php.net/manual/class.errorexception.php"><code>ErrorException</code></a>
(which is not part of this specification).</p>
<h2 id="class-exception"><a class="header" href="#class-exception">Class <code>Exception</code></a></h2>
<p>Class <code>Exception</code> is the base class of all exception types. This class is
defined, as follows:</p>
<pre><code class="language-PHP">class Exception implements Throwable
{
  protected $message = 'Unknown exception';
  protected $code = 0;
  protected $file;
  protected $line;

  public function __construct($message = &quot;&quot;, $code = 0,
               Throwable $previous = NULL);

  final private function __clone();
}
</code></pre>
<p>For information about exception trace-back and nested exceptions, see <a href="#tracing-exceptions">tracing exceptions</a>.</p>
<p>For information about the base interface, see <a href="15-interfaces.html#interface-throwable">Throwable</a>.
Note that the methods from Throwable are implemented as <code>final</code> in the Exception class, which means
the extending class can not override them.</p>
<p>The class members are defined below:</p>
<table><thead><tr><th>Name</th><th>Purpose</th></tr></thead><tbody>
<tr><td><code>$code</code></td><td><code>int</code>; the exception code (as provided by the constructor)</td></tr>
<tr><td><code>$file</code></td><td><code>string</code>; the name of the script where the exception was generated</td></tr>
<tr><td><code>$line</code></td><td><code>int</code>; the source line number in the script where the exception was generated</td></tr>
<tr><td><code>$message</code></td><td><code>string</code>; the exception message (as provided by the constructor)</td></tr>
<tr><td><code>__construct</code></td><td>Takes three (optional) arguments – <code>string</code>: the exception message (defaults to “”), <code>int</code>: the exception code (defaults to 0), and <code>Exception</code>: the previous exception in the chain (defaults to <code>NULL</code>)</td></tr>
<tr><td><code>__clone</code></td><td>Present to inhibit the cloning of exception objects</td></tr>
</tbody></table>
<h2 id="tracing-exceptions"><a class="header" href="#tracing-exceptions">Tracing Exceptions</a></h2>
<p>When an exception is caught, the <code>get*</code> functions in class <code>Exception</code>
provide useful information. If one or more nested function calls were
involved to get to the place where the exception was generated, a record
of those calls is also retained, and made available by <code>getTrace, through what is referred to as the *function stack trace*, or simply, </code><em>trace</em>`.</p>
<p>Let’s refer to the top level of a script as <em>function-level</em> 0.
Function-level 1 is inside any function called from function-level 0.
Function-level 2 is inside any function called from function-level 1,
and so on. The method <code>getTrace</code> returns an array. Exceptions
generated at function-level 0 involve no function call, in which case,
the array returned by <code>getTrace</code> is empty.</p>
<p>Each element of the array returned by <code>getTrace</code> provides information
about a given function level. Let us call this array <em>trace-array</em> and
the number of elements in this array <em>call-level</em>. The key for each of
trace-array’s elements has type int, and ranges from 0 to
call-level - 1. For example, when a top-level script calls function <code>f1</code>,
which calls function <code>f2</code>, which calls function <code>f3</code>, which then generates
an exception, there are four function levels, 0–3, and there are three
lots of trace information, one per call level. That is, trace-array
contains three elements, and they each correspond to the reverse order
of the function calls. For example, <code>trace-array[0]</code> is for the call to
function <code>f3</code>, <code>trace-array[1]</code> is for the call to function <code>f2</code>, and
<code>trace-array[2]</code> is for the call to function <code>f1</code>.</p>
<p>Each element in trace-array is itself an array that contains elements
with the following key/value pairs:</p>
<table><thead><tr><th>Key</th><th>Value Type</th><th>Value</th></tr></thead><tbody>
<tr><td>“args”</td><td><code>array</code></td><td>The set of arguments passed to the function</td></tr>
<tr><td>“class”</td><td><code>string</code></td><td>The name of the function’s parent class</td></tr>
<tr><td>“file”</td><td><code>string</code></td><td>The name of the script where the function was called</td></tr>
<tr><td>“function”</td><td><code>string</code></td><td>The name of the function or class method</td></tr>
<tr><td>“line”</td><td><code>int</code></td><td>The line number in the source where the function was called</td></tr>
<tr><td>“object”</td><td><code>object</code></td><td>The current object</td></tr>
<tr><td>“type”</td><td><code>string</code></td><td>Type of call; <code>-&gt;</code> for an instance method call, <code>::</code> for a static method call, for ordinary function call, empty string(<code>&quot;&quot;</code>) is returned.</td></tr>
</tbody></table>
<p>The key <code>args</code> has a value that is yet another array, which we shall
call <em>argument-array</em>. That array contains a set of values that
corresponds directly to the set of values passed as arguments to the
corresponding function. Regarding element order, <code>argument-array[0]</code>
corresponds to the left-most argument, <code>argument-array[1]</code> corresponds to
the next argument to the right, and so on.</p>
<p>Note that only the actual arguments passed to the function are reported.
Consider the case in which a function has a default argument value
defined for a parameter. If that function is called without an argument
for the parameter having the default value, no corresponding argument
exists in the argument array. Only arguments present at the function-call
site have their values recorded in array-argument.</p>
<p>See also, library functions <a href="http://www.php.net/debug_backtrace"><code>debug_backtrace</code></a> and
<a href="http://www.php.net/debug_print_backtrace"><code>debug_print_backtrace</code></a>.</p>
<h2 id="user-defined-exception-classes"><a class="header" href="#user-defined-exception-classes">User-Defined Exception Classes</a></h2>
<p>An exception class is defined simply by having it extend class <a href="#class-exception"><code>Exception</code></a>.
However, as that class’s <code>__clone</code> method is declared <a href="14-classes.html#methods"><code>final</code></a>,
exception objects cannot be cloned.</p>
<p>When an exception class is defined, typically, its constructors call the
parent class’ constructor as their first operation to ensure the
base-class part of the new object is initialized appropriately. They
often also provide an augmented implementation of
<a href="14-classes.html#method-__tostring"><code>__toString()</code></a>.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../spec/16-traits.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../spec/18-namespaces.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../spec/16-traits.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../spec/18-namespaces.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
